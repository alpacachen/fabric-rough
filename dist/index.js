!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("fabric"));else if("function"==typeof define&&define.amd)define(["fabric"],e);else{var s="object"==typeof exports?e(require("fabric")):e(t.fabric);for(var n in s)("object"==typeof exports?exports:t)[n]=s[n]}}(self,(function(t){return(()=>{"use strict";var e={757:(t,e,s)=>{function n(t,e,s){if(t&&t.length){const[n,a]=e,i=Math.PI/180*s,o=Math.cos(i),r=Math.sin(i);t.forEach((t=>{const[e,s]=t;t[0]=(e-n)*o-(s-a)*r+n,t[1]=(e-n)*r+(s-a)*o+a}))}}function a(t){const e=t[0],s=t[1];return Math.sqrt(Math.pow(e[0]-s[0],2)+Math.pow(e[1]-s[1],2))}function i(t,e){const s=e.hachureAngle+90;let a=e.hachureGap;a<0&&(a=4*e.strokeWidth),a=Math.max(a,.1);const i=[0,0];if(s)for(const e of t)n(e,i,s);const o=function(t,e){const s=[];for(const e of t){const t=[...e];t[0].join(",")!==t[t.length-1].join(",")&&t.push([t[0][0],t[0][1]]),t.length>2&&s.push(t)}const n=[];e=Math.max(e,.1);const a=[];for(const t of s)for(let e=0;e<t.length-1;e++){const s=t[e],n=t[e+1];if(s[1]!==n[1]){const t=Math.min(s[1],n[1]);a.push({ymin:t,ymax:Math.max(s[1],n[1]),x:t===s[1]?s[0]:n[0],islope:(n[0]-s[0])/(n[1]-s[1])})}}if(a.sort(((t,e)=>t.ymin<e.ymin?-1:t.ymin>e.ymin?1:t.x<e.x?-1:t.x>e.x?1:t.ymax===e.ymax?0:(t.ymax-e.ymax)/Math.abs(t.ymax-e.ymax))),!a.length)return n;let i=[],o=a[0].ymin;for(;i.length||a.length;){if(a.length){let t=-1;for(let e=0;e<a.length&&!(a[e].ymin>o);e++)t=e;a.splice(0,t+1).forEach((t=>{i.push({s:o,edge:t})}))}if(i=i.filter((t=>!(t.edge.ymax<=o))),i.sort(((t,e)=>t.edge.x===e.edge.x?0:(t.edge.x-e.edge.x)/Math.abs(t.edge.x-e.edge.x))),i.length>1)for(let t=0;t<i.length;t+=2){const e=t+1;if(e>=i.length)break;const s=i[t].edge,a=i[e].edge;n.push([[Math.round(s.x),o],[Math.round(a.x),o]])}o+=e,i.forEach((t=>{t.edge.x=t.edge.x+e*t.edge.islope}))}return n}(t,a);if(s){for(const e of t)n(e,i,-s);!function(t,e,s){const a=[];t.forEach((t=>a.push(...t))),n(a,e,s)}(o,i,-s)}return o}s.r(e),s.d(e,{default:()=>X});class o{constructor(t){this.helper=t}fillPolygons(t,e){return this._fillPolygons(t,e)}_fillPolygons(t,e){const s=i(t,e);return{type:"fillSketch",ops:this.renderLines(s,e)}}renderLines(t,e){const s=[];for(const n of t)s.push(...this.helper.doubleLineOps(n[0][0],n[0][1],n[1][0],n[1][1],e));return s}}class r extends o{fillPolygons(t,e){let s=e.hachureGap;s<0&&(s=4*e.strokeWidth),s=Math.max(s,.1);const n=i(t,Object.assign({},e,{hachureGap:s})),o=Math.PI/180*e.hachureAngle,r=[],h=.5*s*Math.cos(o),c=.5*s*Math.sin(o);for(const[t,e]of n)a([t,e])&&r.push([[t[0]-h,t[1]+c],[...e]],[[t[0]+h,t[1]-c],[...e]]);return{type:"fillSketch",ops:this.renderLines(r,e)}}}class h extends o{fillPolygons(t,e){const s=this._fillPolygons(t,e),n=Object.assign({},e,{hachureAngle:e.hachureAngle+90}),a=this._fillPolygons(t,n);return s.ops=s.ops.concat(a.ops),s}}class c{constructor(t){this.helper=t}fillPolygons(t,e){const s=i(t,e=Object.assign({},e,{hachureAngle:0}));return this.dotsOnLines(s,e)}dotsOnLines(t,e){const s=[];let n=e.hachureGap;n<0&&(n=4*e.strokeWidth),n=Math.max(n,.1);let i=e.fillWeight;i<0&&(i=e.strokeWidth/2);const o=n/4;for(const r of t){const t=a(r),h=t/n,c=Math.ceil(h)-1,l=t-c*n,u=(r[0][0]+r[1][0])/2-n/4,p=Math.min(r[0][1],r[1][1]);for(let t=0;t<c;t++){const a=p+l+t*n,r=u-o+2*Math.random()*o,h=a-o+2*Math.random()*o,c=this.helper.ellipse(r,h,i,i,e);s.push(...c.ops)}}return{type:"fillSketch",ops:s}}}class l{constructor(t){this.helper=t}fillPolygons(t,e){const s=i(t,e);return{type:"fillSketch",ops:this.dashedLine(s,e)}}dashedLine(t,e){const s=e.dashOffset<0?e.hachureGap<0?4*e.strokeWidth:e.hachureGap:e.dashOffset,n=e.dashGap<0?e.hachureGap<0?4*e.strokeWidth:e.hachureGap:e.dashGap,i=[];return t.forEach((t=>{const o=a(t),r=Math.floor(o/(s+n)),h=(o+n-r*(s+n))/2;let c=t[0],l=t[1];c[0]>l[0]&&(c=t[1],l=t[0]);const u=Math.atan((l[1]-c[1])/(l[0]-c[0]));for(let t=0;t<r;t++){const a=t*(s+n),o=a+s,r=[c[0]+a*Math.cos(u)+h*Math.cos(u),c[1]+a*Math.sin(u)+h*Math.sin(u)],l=[c[0]+o*Math.cos(u)+h*Math.cos(u),c[1]+o*Math.sin(u)+h*Math.sin(u)];i.push(...this.helper.doubleLineOps(r[0],r[1],l[0],l[1],e))}})),i}}class u{constructor(t){this.helper=t}fillPolygons(t,e){const s=e.hachureGap<0?4*e.strokeWidth:e.hachureGap,n=e.zigzagOffset<0?s:e.zigzagOffset,a=i(t,e=Object.assign({},e,{hachureGap:s+n}));return{type:"fillSketch",ops:this.zigzagLines(a,n,e)}}zigzagLines(t,e,s){const n=[];return t.forEach((t=>{const i=a(t),o=Math.round(i/(2*e));let r=t[0],h=t[1];r[0]>h[0]&&(r=t[1],h=t[0]);const c=Math.atan((h[1]-r[1])/(h[0]-r[0]));for(let t=0;t<o;t++){const a=2*t*e,i=2*(t+1)*e,o=Math.sqrt(2*Math.pow(e,2)),h=[r[0]+a*Math.cos(c),r[1]+a*Math.sin(c)],l=[r[0]+i*Math.cos(c),r[1]+i*Math.sin(c)],u=[h[0]+o*Math.cos(c+Math.PI/4),h[1]+o*Math.sin(c+Math.PI/4)];n.push(...this.helper.doubleLineOps(h[0],h[1],u[0],u[1],s),...this.helper.doubleLineOps(u[0],u[1],l[0],l[1],s))}})),n}}const p={};class f{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const d={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function g(t,e){return t.type===e}function M(t){const e=[],s=function(t){const e=new Array;for(;""!==t;)if(t.match(/^([ \t\r\n,]+)/))t=t.substr(RegExp.$1.length);else if(t.match(/^([aAcChHlLmMqQsStTvVzZ])/))e[e.length]={type:0,text:RegExp.$1},t=t.substr(RegExp.$1.length);else{if(!t.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];e[e.length]={type:1,text:`${parseFloat(RegExp.$1)}`},t=t.substr(RegExp.$1.length)}return e[e.length]={type:2,text:""},e}(t);let n="BOD",a=0,i=s[a];for(;!g(i,2);){let o=0;const r=[];if("BOD"===n){if("M"!==i.text&&"m"!==i.text)return M("M0,0"+t);a++,o=d[i.text],n=i.text}else g(i,1)?o=d[n]:(a++,o=d[i.text],n=i.text);if(!(a+o<s.length))throw new Error("Path data ended short");for(let t=a;t<a+o;t++){const e=s[t];if(!g(e,1))throw new Error("Param not a number: "+n+","+e.text);r[r.length]=+e.text}if("number"!=typeof d[n])throw new Error("Bad segment: "+n);{const t={key:n,data:r};e.push(t),a+=o,i=s[a],"M"===n&&(n="L"),"m"===n&&(n="l")}}return e}function k(t){let e=0,s=0,n=0,a=0;const i=[];for(const{key:o,data:r}of t)switch(o){case"M":i.push({key:"M",data:[...r]}),[e,s]=r,[n,a]=r;break;case"m":e+=r[0],s+=r[1],i.push({key:"M",data:[e,s]}),n=e,a=s;break;case"L":i.push({key:"L",data:[...r]}),[e,s]=r;break;case"l":e+=r[0],s+=r[1],i.push({key:"L",data:[e,s]});break;case"C":i.push({key:"C",data:[...r]}),e=r[4],s=r[5];break;case"c":{const t=r.map(((t,n)=>n%2?t+s:t+e));i.push({key:"C",data:t}),e=t[4],s=t[5];break}case"Q":i.push({key:"Q",data:[...r]}),e=r[2],s=r[3];break;case"q":{const t=r.map(((t,n)=>n%2?t+s:t+e));i.push({key:"Q",data:t}),e=t[2],s=t[3];break}case"A":i.push({key:"A",data:[...r]}),e=r[5],s=r[6];break;case"a":e+=r[5],s+=r[6],i.push({key:"A",data:[r[0],r[1],r[2],r[3],r[4],e,s]});break;case"H":i.push({key:"H",data:[...r]}),e=r[0];break;case"h":e+=r[0],i.push({key:"H",data:[e]});break;case"V":i.push({key:"V",data:[...r]}),s=r[0];break;case"v":s+=r[0],i.push({key:"V",data:[s]});break;case"S":i.push({key:"S",data:[...r]}),e=r[2],s=r[3];break;case"s":{const t=r.map(((t,n)=>n%2?t+s:t+e));i.push({key:"S",data:t}),e=t[2],s=t[3];break}case"T":i.push({key:"T",data:[...r]}),e=r[0],s=r[1];break;case"t":e+=r[0],s+=r[1],i.push({key:"T",data:[e,s]});break;case"Z":case"z":i.push({key:"Z",data:[]}),e=n,s=a}return i}function y(t){const e=[];let s="",n=0,a=0,i=0,o=0,r=0,h=0;for(const{key:c,data:l}of t){switch(c){case"M":e.push({key:"M",data:[...l]}),[n,a]=l,[i,o]=l;break;case"C":e.push({key:"C",data:[...l]}),n=l[4],a=l[5],r=l[2],h=l[3];break;case"L":e.push({key:"L",data:[...l]}),[n,a]=l;break;case"H":n=l[0],e.push({key:"L",data:[n,a]});break;case"V":a=l[0],e.push({key:"L",data:[n,a]});break;case"S":{let t=0,i=0;"C"===s||"S"===s?(t=n+(n-r),i=a+(a-h)):(t=n,i=a),e.push({key:"C",data:[t,i,...l]}),r=l[0],h=l[1],n=l[2],a=l[3];break}case"T":{const[t,i]=l;let o=0,c=0;"Q"===s||"T"===s?(o=n+(n-r),c=a+(a-h)):(o=n,c=a);const u=n+2*(o-n)/3,p=a+2*(c-a)/3,f=t+2*(o-t)/3,d=i+2*(c-i)/3;e.push({key:"C",data:[u,p,f,d,t,i]}),r=o,h=c,n=t,a=i;break}case"Q":{const[t,s,i,o]=l,c=n+2*(t-n)/3,u=a+2*(s-a)/3,p=i+2*(t-i)/3,f=o+2*(s-o)/3;e.push({key:"C",data:[c,u,p,f,i,o]}),r=t,h=s,n=i,a=o;break}case"A":{const t=Math.abs(l[0]),s=Math.abs(l[1]),i=l[2],o=l[3],r=l[4],h=l[5],c=l[6];0===t||0===s?(e.push({key:"C",data:[n,a,h,c,h,c]}),n=h,a=c):n===h&&a===c||(v(n,a,h,c,t,s,i,o,r).forEach((function(t){e.push({key:"C",data:t})})),n=h,a=c);break}case"Z":e.push({key:"Z",data:[]}),n=i,a=o}s=c}return e}function b(t,e,s){return[t*Math.cos(s)-e*Math.sin(s),t*Math.sin(s)+e*Math.cos(s)]}function v(t,e,s,n,a,i,o,r,h,c){const l=(u=o,Math.PI*u/180);var u;let p=[],f=0,d=0,g=0,M=0;if(c)[f,d,g,M]=c;else{[t,e]=b(t,e,-l),[s,n]=b(s,n,-l);const o=(t-s)/2,c=(e-n)/2;let u=o*o/(a*a)+c*c/(i*i);u>1&&(u=Math.sqrt(u),a*=u,i*=u);const p=a*a,k=i*i,y=p*k-p*c*c-k*o*o,v=p*c*c+k*o*o,m=(r===h?-1:1)*Math.sqrt(Math.abs(y/v));g=m*a*c/i+(t+s)/2,M=m*-i*o/a+(e+n)/2,f=Math.asin(parseFloat(((e-M)/i).toFixed(9))),d=Math.asin(parseFloat(((n-M)/i).toFixed(9))),t<g&&(f=Math.PI-f),s<g&&(d=Math.PI-d),f<0&&(f=2*Math.PI+f),d<0&&(d=2*Math.PI+d),h&&f>d&&(f-=2*Math.PI),!h&&d>f&&(d-=2*Math.PI)}let k=d-f;if(Math.abs(k)>120*Math.PI/180){const t=d,e=s,r=n;d=h&&d>f?f+120*Math.PI/180*1:f+120*Math.PI/180*-1,p=v(s=g+a*Math.cos(d),n=M+i*Math.sin(d),e,r,a,i,o,0,h,[d,t,g,M])}k=d-f;const y=Math.cos(f),m=Math.sin(f),w=Math.cos(d),x=Math.sin(d),P=Math.tan(k/4),O=4/3*a*P,S=4/3*i*P,R=[t,e],_=[t+O*m,e-S*y],L=[s+O*x,n-S*w],C=[s,n];if(_[0]=2*R[0]-_[0],_[1]=2*R[1]-_[1],c)return[_,L,C].concat(p);{p=[_,L,C].concat(p);const t=[];for(let e=0;e<p.length;e+=3){const s=b(p[e][0],p[e][1],l),n=b(p[e+1][0],p[e+1][1],l),a=b(p[e+2][0],p[e+2][1],l);t.push([s[0],s[1],n[0],n[1],a[0],a[1]])}return t}}const m={randOffset:function(t,e){return z(t,e)},randOffsetWithRange:function(t,e,s){return C(t,e,s)},ellipse:function(t,e,s,n,a){return O(t,e,a,P(s,n,a)).opset},doubleLineOps:function(t,e,s,n,a){return T(t,e,s,n,a,!0)}};function w(t,e,s,n,a){return{type:"path",ops:T(t,e,s,n,a)}}function x(t,e,s){const n=(t||[]).length;if(n>2){const a=[];for(let e=0;e<n-1;e++)a.push(...T(t[e][0],t[e][1],t[e+1][0],t[e+1][1],s));return e&&a.push(...T(t[n-1][0],t[n-1][1],t[0][0],t[0][1],s)),{type:"path",ops:a}}return 2===n?w(t[0][0],t[0][1],t[1][0],t[1][1],s):{type:"path",ops:[]}}function P(t,e,s){const n=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(t/2,2)+Math.pow(e/2,2))/2)),a=Math.max(s.curveStepCount,s.curveStepCount/Math.sqrt(200)*n),i=2*Math.PI/a;let o=Math.abs(t/2),r=Math.abs(e/2);const h=1-s.curveFitting;return o+=z(o*h,s),r+=z(r*h,s),{increment:i,rx:o,ry:r}}function O(t,e,s,n){const[a,i]=I(n.increment,t,e,n.rx,n.ry,1,n.increment*C(.1,C(.4,1,s),s),s);let o=E(a,null,s);if(!s.disableMultiStroke&&0!==s.roughness){const[a]=I(n.increment,t,e,n.rx,n.ry,1.5,0,s),i=E(a,null,s);o=o.concat(i)}return{estimatedPoints:i,opset:{type:"path",ops:o}}}function S(t,e,s,n,a,i,o,r,h){const c=t,l=e;let u=Math.abs(s/2),p=Math.abs(n/2);u+=z(.01*u,h),p+=z(.01*p,h);let f=a,d=i;for(;f<0;)f+=2*Math.PI,d+=2*Math.PI;d-f>2*Math.PI&&(f=0,d=2*Math.PI);const g=2*Math.PI/h.curveStepCount,M=Math.min(g/2,(d-f)/2),k=W(M,c,l,u,p,f,d,1,h);if(!h.disableMultiStroke){const t=W(M,c,l,u,p,f,d,1.5,h);k.push(...t)}return o&&(r?k.push(...T(c,l,c+u*Math.cos(f),l+p*Math.sin(f),h),...T(c,l,c+u*Math.cos(d),l+p*Math.sin(d),h)):k.push({op:"lineTo",data:[c,l]},{op:"lineTo",data:[c+u*Math.cos(f),l+p*Math.sin(f)]})),{type:"path",ops:k}}function R(t,e){const s=[];for(const n of t)if(n.length){const t=e.maxRandomnessOffset||0,a=n.length;if(a>2){s.push({op:"move",data:[n[0][0]+z(t,e),n[0][1]+z(t,e)]});for(let i=1;i<a;i++)s.push({op:"lineTo",data:[n[i][0]+z(t,e),n[i][1]+z(t,e)]})}}return{type:"fillPath",ops:s}}function _(t,e){return function(t,e){let s=t.fillStyle||"hachure";if(!p[s])switch(s){case"zigzag":p[s]||(p[s]=new r(e));break;case"cross-hatch":p[s]||(p[s]=new h(e));break;case"dots":p[s]||(p[s]=new c(e));break;case"dashed":p[s]||(p[s]=new l(e));break;case"zigzag-line":p[s]||(p[s]=new u(e));break;default:s="hachure",p[s]||(p[s]=new o(e))}return p[s]}(e,m).fillPolygons(t,e)}function L(t){return t.randomizer||(t.randomizer=new f(t.seed||0)),t.randomizer.next()}function C(t,e,s,n=1){return s.roughness*n*(L(s)*(e-t)+t)}function z(t,e,s=1){return C(-t,t,e,s)}function T(t,e,s,n,a,i=!1){const o=i?a.disableMultiStrokeFill:a.disableMultiStroke,r=A(t,e,s,n,a,!0,!1);if(o)return r;const h=A(t,e,s,n,a,!0,!0);return r.concat(h)}function A(t,e,s,n,a,i,o){const r=Math.pow(t-s,2)+Math.pow(e-n,2),h=Math.sqrt(r);let c=1;c=h<200?1:h>500?.4:-.0016668*h+1.233334;let l=a.maxRandomnessOffset||0;l*l*100>r&&(l=h/10);const u=l/2,p=.2+.2*L(a);let f=a.bowing*a.maxRandomnessOffset*(n-e)/200,d=a.bowing*a.maxRandomnessOffset*(t-s)/200;f=z(f,a,c),d=z(d,a,c);const g=[],M=()=>z(u,a,c),k=()=>z(l,a,c),y=a.preserveVertices;return i&&(o?g.push({op:"move",data:[t+(y?0:M()),e+(y?0:M())]}):g.push({op:"move",data:[t+(y?0:z(l,a,c)),e+(y?0:z(l,a,c))]})),o?g.push({op:"bcurveTo",data:[f+t+(s-t)*p+M(),d+e+(n-e)*p+M(),f+t+2*(s-t)*p+M(),d+e+2*(n-e)*p+M(),s+(y?0:M()),n+(y?0:M())]}):g.push({op:"bcurveTo",data:[f+t+(s-t)*p+k(),d+e+(n-e)*p+k(),f+t+2*(s-t)*p+k(),d+e+2*(n-e)*p+k(),s+(y?0:k()),n+(y?0:k())]}),g}function D(t,e,s){const n=[];n.push([t[0][0]+z(e,s),t[0][1]+z(e,s)]),n.push([t[0][0]+z(e,s),t[0][1]+z(e,s)]);for(let a=1;a<t.length;a++)n.push([t[a][0]+z(e,s),t[a][1]+z(e,s)]),a===t.length-1&&n.push([t[a][0]+z(e,s),t[a][1]+z(e,s)]);return E(n,null,s)}function E(t,e,s){const n=t.length,a=[];if(n>3){const i=[],o=1-s.curveTightness;a.push({op:"move",data:[t[1][0],t[1][1]]});for(let e=1;e+2<n;e++){const s=t[e];i[0]=[s[0],s[1]],i[1]=[s[0]+(o*t[e+1][0]-o*t[e-1][0])/6,s[1]+(o*t[e+1][1]-o*t[e-1][1])/6],i[2]=[t[e+1][0]+(o*t[e][0]-o*t[e+2][0])/6,t[e+1][1]+(o*t[e][1]-o*t[e+2][1])/6],i[3]=[t[e+1][0],t[e+1][1]],a.push({op:"bcurveTo",data:[i[1][0],i[1][1],i[2][0],i[2][1],i[3][0],i[3][1]]})}if(e&&2===e.length){const t=s.maxRandomnessOffset;a.push({op:"lineTo",data:[e[0]+z(t,s),e[1]+z(t,s)]})}}else 3===n?(a.push({op:"move",data:[t[1][0],t[1][1]]}),a.push({op:"bcurveTo",data:[t[1][0],t[1][1],t[2][0],t[2][1],t[2][0],t[2][1]]})):2===n&&a.push(...T(t[0][0],t[0][1],t[1][0],t[1][1],s));return a}function I(t,e,s,n,a,i,o,r){const h=[],c=[],l=z(.5,r)-Math.PI/2,u=0===r.roughness;u||c.push([z(i,r)+e+.9*n*Math.cos(l-t),z(i,r)+s+.9*a*Math.sin(l-t)]);const p=2*Math.PI+(u?0:l-.01);for(let o=l;o<p;o+=t){const t=[z(i,r)+e+n*Math.cos(o),z(i,r)+s+a*Math.sin(o)];h.push(t),c.push(t)}return u||(c.push([z(i,r)+e+n*Math.cos(l+2*Math.PI+.5*o),z(i,r)+s+a*Math.sin(l+2*Math.PI+.5*o)]),c.push([z(i,r)+e+.98*n*Math.cos(l+o),z(i,r)+s+.98*a*Math.sin(l+o)]),c.push([z(i,r)+e+.9*n*Math.cos(l+.5*o),z(i,r)+s+.9*a*Math.sin(l+.5*o)])),[c,h]}function W(t,e,s,n,a,i,o,r,h){const c=i+z(.1,h),l=[];l.push([z(r,h)+e+.9*n*Math.cos(c-t),z(r,h)+s+.9*a*Math.sin(c-t)]);for(let i=c;i<=o;i+=t)l.push([z(r,h)+e+n*Math.cos(i),z(r,h)+s+a*Math.sin(i)]);return l.push([e+n*Math.cos(o),s+a*Math.sin(o)]),l.push([e+n*Math.cos(o),s+a*Math.sin(o)]),E(l,null,h)}function j(t,e,s,n,a,i,o,r){const h=[],c=[r.maxRandomnessOffset||1,(r.maxRandomnessOffset||1)+.3];let l=[0,0];const u=r.disableMultiStroke?1:2,p=r.preserveVertices;for(let f=0;f<u;f++)0===f?h.push({op:"move",data:[o[0],o[1]]}):h.push({op:"move",data:[o[0]+(p?0:z(c[0],r)),o[1]+(p?0:z(c[0],r))]}),l=p?[a,i]:[a+z(c[f],r),i+z(c[f],r)],h.push({op:"bcurveTo",data:[t+z(c[f],r),e+z(c[f],r),s+z(c[f],r),n+z(c[f],r),l[0],l[1]]});return h}function $(t){return[...t]}function G(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)}function q(t,e,s){const n=G(e,s);if(0===n)return G(t,e);let a=((t[0]-e[0])*(s[0]-e[0])+(t[1]-e[1])*(s[1]-e[1]))/n;return a=Math.max(0,Math.min(1,a)),G(t,F(e,s,a))}function F(t,e,s){return[t[0]+(e[0]-t[0])*s,t[1]+(e[1]-t[1])*s]}function V(t,e,s,n){const a=n||[];if(function(t,e){const s=t[e+0],n=t[e+1],a=t[e+2],i=t[e+3];let o=3*n[0]-2*s[0]-i[0];o*=o;let r=3*n[1]-2*s[1]-i[1];r*=r;let h=3*a[0]-2*i[0]-s[0];h*=h;let c=3*a[1]-2*i[1]-s[1];return c*=c,o<h&&(o=h),r<c&&(r=c),o+r}(t,e)<s){const s=t[e+0];a.length?(i=a[a.length-1],o=s,Math.sqrt(G(i,o))>1&&a.push(s)):a.push(s),a.push(t[e+3])}else{const n=.5,i=t[e+0],o=t[e+1],r=t[e+2],h=t[e+3],c=F(i,o,n),l=F(o,r,n),u=F(r,h,n),p=F(c,l,n),f=F(l,u,n),d=F(p,f,n);V([i,c,p,d],0,s,a),V([d,f,u,h],0,s,a)}var i,o;return a}function Z(t,e){return Q(t,0,t.length,e)}function Q(t,e,s,n,a){const i=a||[],o=t[e],r=t[s-1];let h=0,c=1;for(let n=e+1;n<s-1;++n){const e=q(t[n],o,r);e>h&&(h=e,c=n)}return Math.sqrt(h)>n?(Q(t,e,c+1,n,i),Q(t,c,s,n,i)):(i.length||i.push(o),i.push(r)),i}function H(t,e=.15,s){const n=[],a=(t.length-1)/3;for(let s=0;s<a;s++)V(t,3*s,e,n);return s&&s>0?Q(n,0,n.length,s):n}const N="none";class B{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,e,s){return{shape:t,sets:e||[],options:s||this.defaultOptions}}line(t,e,s,n,a){const i=this._o(a);return this._d("line",[w(t,e,s,n,i)],i)}rectangle(t,e,s,n,a){const i=this._o(a),o=[],r=function(t,e,s,n,a){return function(t,e){return x(t,!0,e)}([[t,e],[t+s,e],[t+s,e+n],[t,e+n]],a)}(t,e,s,n,i);if(i.fill){const a=[[t,e],[t+s,e],[t+s,e+n],[t,e+n]];"solid"===i.fillStyle?o.push(R([a],i)):o.push(_([a],i))}return i.stroke!==N&&o.push(r),this._d("rectangle",o,i)}ellipse(t,e,s,n,a){const i=this._o(a),o=[],r=P(s,n,i),h=O(t,e,i,r);if(i.fill)if("solid"===i.fillStyle){const s=O(t,e,i,r).opset;s.type="fillPath",o.push(s)}else o.push(_([h.estimatedPoints],i));return i.stroke!==N&&o.push(h.opset),this._d("ellipse",o,i)}circle(t,e,s,n){const a=this.ellipse(t,e,s,s,n);return a.shape="circle",a}linearPath(t,e){const s=this._o(e);return this._d("linearPath",[x(t,!1,s)],s)}arc(t,e,s,n,a,i,o=!1,r){const h=this._o(r),c=[],l=S(t,e,s,n,a,i,o,!0,h);if(o&&h.fill)if("solid"===h.fillStyle){const o=Object.assign({},h);o.disableMultiStroke=!0;const r=S(t,e,s,n,a,i,!0,!1,o);r.type="fillPath",c.push(r)}else c.push(function(t,e,s,n,a,i,o){const r=t,h=e;let c=Math.abs(s/2),l=Math.abs(n/2);c+=z(.01*c,o),l+=z(.01*l,o);let u=a,p=i;for(;u<0;)u+=2*Math.PI,p+=2*Math.PI;p-u>2*Math.PI&&(u=0,p=2*Math.PI);const f=(p-u)/o.curveStepCount,d=[];for(let t=u;t<=p;t+=f)d.push([r+c*Math.cos(t),h+l*Math.sin(t)]);return d.push([r+c*Math.cos(p),h+l*Math.sin(p)]),d.push([r,h]),_([d],o)}(t,e,s,n,a,i,h));return h.stroke!==N&&c.push(l),this._d("arc",c,h)}curve(t,e){const s=this._o(e),n=[],a=function(t,e){let s=D(t,1*(1+.2*e.roughness),e);if(!e.disableMultiStroke){const n=D(t,1.5*(1+.22*e.roughness),function(t){const e=Object.assign({},t);return e.randomizer=void 0,t.seed&&(e.seed=t.seed+1),e}(e));s=s.concat(n)}return{type:"path",ops:s}}(t,s);if(s.fill&&s.fill!==N&&t.length>=3){const e=function(t,e=0){const s=t.length;if(s<3)throw new Error("A curve must have at least three points.");const n=[];if(3===s)n.push($(t[0]),$(t[1]),$(t[2]),$(t[2]));else{const s=[];s.push(t[0],t[0]);for(let e=1;e<t.length;e++)s.push(t[e]),e===t.length-1&&s.push(t[e]);const a=[],i=1-e;n.push($(s[0]));for(let t=1;t+2<s.length;t++){const e=s[t];a[0]=[e[0],e[1]],a[1]=[e[0]+(i*s[t+1][0]-i*s[t-1][0])/6,e[1]+(i*s[t+1][1]-i*s[t-1][1])/6],a[2]=[s[t+1][0]+(i*s[t][0]-i*s[t+2][0])/6,s[t+1][1]+(i*s[t][1]-i*s[t+2][1])/6],a[3]=[s[t+1][0],s[t+1][1]],n.push(a[1],a[2],a[3])}}return n}(t),a=H(e,10,(1+s.roughness)/2);"solid"===s.fillStyle?n.push(R([a],s)):n.push(_([a],s))}return s.stroke!==N&&n.push(a),this._d("curve",n,s)}polygon(t,e){const s=this._o(e),n=[],a=x(t,!0,s);return s.fill&&("solid"===s.fillStyle?n.push(R([t],s)):n.push(_([t],s))),s.stroke!==N&&n.push(a),this._d("polygon",n,s)}path(t,e){const s=this._o(e),n=[];if(!t)return this._d("path",n,s);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const a=s.fill&&"transparent"!==s.fill&&s.fill!==N,i=s.stroke!==N,o=!!(s.simplification&&s.simplification<1),r=function(t,e,s){const n=y(k(M(t))),a=[];let i=[],o=[0,0],r=[];const h=()=>{r.length>=4&&i.push(...H(r,1)),r=[]},c=()=>{h(),i.length&&(a.push(i),i=[])};for(const{key:t,data:e}of n)switch(t){case"M":c(),o=[e[0],e[1]],i.push(o);break;case"L":h(),i.push([e[0],e[1]]);break;case"C":if(!r.length){const t=i.length?i[i.length-1]:o;r.push([t[0],t[1]])}r.push([e[0],e[1]]),r.push([e[2],e[3]]),r.push([e[4],e[5]]);break;case"Z":h(),i.push([o[0],o[1]])}if(c(),!s)return a;const l=[];for(const t of a){const e=Z(t,s);e.length&&l.push(e)}return l}(t,0,o?4-4*s.simplification:(1+s.roughness)/2);return a&&("solid"===s.fillStyle?n.push(R(r,s)):n.push(_(r,s))),i&&(o?r.forEach((t=>{n.push(x(t,!1,s))})):n.push(function(t,e){const s=y(k(M(t))),n=[];let a=[0,0],i=[0,0];for(const{key:t,data:o}of s)switch(t){case"M":{const t=1*(e.maxRandomnessOffset||0),s=e.preserveVertices;n.push({op:"move",data:o.map((n=>n+(s?0:z(t,e))))}),i=[o[0],o[1]],a=[o[0],o[1]];break}case"L":n.push(...T(i[0],i[1],o[0],o[1],e)),i=[o[0],o[1]];break;case"C":{const[t,s,a,r,h,c]=o;n.push(...j(t,s,a,r,h,c,i,e)),i=[h,c];break}case"Z":n.push(...T(i[0],i[1],a[0],a[1],e)),i=[a[0],a[1]]}return{type:"path",ops:n}}(t,s))),this._d("path",n,s)}opsToPath(t,e){let s="";for(const n of t.ops){const t="number"==typeof e&&e>=0?n.data.map((t=>+t.toFixed(e))):n.data;switch(n.op){case"move":s+=`M${t[0]} ${t[1]} `;break;case"bcurveTo":s+=`C${t[0]} ${t[1]}, ${t[2]} ${t[3]}, ${t[4]} ${t[5]} `;break;case"lineTo":s+=`L${t[0]} ${t[1]} `}}return s.trim()}toPaths(t){const e=t.sets||[],s=t.options||this.defaultOptions,n=[];for(const t of e){let e=null;switch(t.type){case"path":e={d:this.opsToPath(t),stroke:s.stroke,strokeWidth:s.strokeWidth,fill:N};break;case"fillPath":e={d:this.opsToPath(t),stroke:N,strokeWidth:0,fill:s.fill||N};break;case"fillSketch":e=this.fillSketch(t,s)}e&&n.push(e)}return n}fillSketch(t,e){let s=e.fillWeight;return s<0&&(s=e.strokeWidth/2),{d:this.opsToPath(t),stroke:e.fill||N,strokeWidth:s,fill:N}}}class J{constructor(t,e){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new B(e)}draw(t){const e=t.sets||[],s=t.options||this.getDefaultOptions(),n=this.ctx,a=t.options.fixedDecimalPlaceDigits;for(const i of e)switch(i.type){case"path":n.save(),n.strokeStyle="none"===s.stroke?"transparent":s.stroke,n.lineWidth=s.strokeWidth,s.strokeLineDash&&n.setLineDash(s.strokeLineDash),s.strokeLineDashOffset&&(n.lineDashOffset=s.strokeLineDashOffset),this._drawToContext(n,i,a),n.restore();break;case"fillPath":{n.save(),n.fillStyle=s.fill||"";const e="curve"===t.shape||"polygon"===t.shape||"path"===t.shape?"evenodd":"nonzero";this._drawToContext(n,i,a,e),n.restore();break}case"fillSketch":this.fillSketch(n,i,s)}}fillSketch(t,e,s){let n=s.fillWeight;n<0&&(n=s.strokeWidth/2),t.save(),s.fillLineDash&&t.setLineDash(s.fillLineDash),s.fillLineDashOffset&&(t.lineDashOffset=s.fillLineDashOffset),t.strokeStyle=s.fill||"",t.lineWidth=n,this._drawToContext(t,e,s.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,e,s,n="nonzero"){t.beginPath();for(const n of e.ops){const e="number"==typeof s&&s>=0?n.data.map((t=>+t.toFixed(s))):n.data;switch(n.op){case"move":t.moveTo(e[0],e[1]);break;case"bcurveTo":t.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5]);break;case"lineTo":t.lineTo(e[0],e[1])}}"fillPath"===e.type?t.fill(n):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,e,s,n,a){const i=this.gen.line(t,e,s,n,a);return this.draw(i),i}rectangle(t,e,s,n,a){const i=this.gen.rectangle(t,e,s,n,a);return this.draw(i),i}ellipse(t,e,s,n,a){const i=this.gen.ellipse(t,e,s,n,a);return this.draw(i),i}circle(t,e,s,n){const a=this.gen.circle(t,e,s,n);return this.draw(a),a}linearPath(t,e){const s=this.gen.linearPath(t,e);return this.draw(s),s}polygon(t,e){const s=this.gen.polygon(t,e);return this.draw(s),s}arc(t,e,s,n,a,i,o=!1,r){const h=this.gen.arc(t,e,s,n,a,i,o,r);return this.draw(h),h}curve(t,e){const s=this.gen.curve(t,e);return this.draw(s),s}path(t,e){const s=this.gen.path(t,e);return this.draw(s),s}}const K="http://www.w3.org/2000/svg";class U{constructor(t,e){this.svg=t,this.gen=new B(e)}draw(t){const e=t.sets||[],s=t.options||this.getDefaultOptions(),n=this.svg.ownerDocument||window.document,a=n.createElementNS(K,"g"),i=t.options.fixedDecimalPlaceDigits;for(const o of e){let e=null;switch(o.type){case"path":e=n.createElementNS(K,"path"),e.setAttribute("d",this.opsToPath(o,i)),e.setAttribute("stroke",s.stroke),e.setAttribute("stroke-width",s.strokeWidth+""),e.setAttribute("fill","none"),s.strokeLineDash&&e.setAttribute("stroke-dasharray",s.strokeLineDash.join(" ").trim()),s.strokeLineDashOffset&&e.setAttribute("stroke-dashoffset",`${s.strokeLineDashOffset}`);break;case"fillPath":e=n.createElementNS(K,"path"),e.setAttribute("d",this.opsToPath(o,i)),e.setAttribute("stroke","none"),e.setAttribute("stroke-width","0"),e.setAttribute("fill",s.fill||""),"curve"!==t.shape&&"polygon"!==t.shape||e.setAttribute("fill-rule","evenodd");break;case"fillSketch":e=this.fillSketch(n,o,s)}e&&a.appendChild(e)}return a}fillSketch(t,e,s){let n=s.fillWeight;n<0&&(n=s.strokeWidth/2);const a=t.createElementNS(K,"path");return a.setAttribute("d",this.opsToPath(e,s.fixedDecimalPlaceDigits)),a.setAttribute("stroke",s.fill||""),a.setAttribute("stroke-width",n+""),a.setAttribute("fill","none"),s.fillLineDash&&a.setAttribute("stroke-dasharray",s.fillLineDash.join(" ").trim()),s.fillLineDashOffset&&a.setAttribute("stroke-dashoffset",`${s.fillLineDashOffset}`),a}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,e){return this.gen.opsToPath(t,e)}line(t,e,s,n,a){const i=this.gen.line(t,e,s,n,a);return this.draw(i)}rectangle(t,e,s,n,a){const i=this.gen.rectangle(t,e,s,n,a);return this.draw(i)}ellipse(t,e,s,n,a){const i=this.gen.ellipse(t,e,s,n,a);return this.draw(i)}circle(t,e,s,n){const a=this.gen.circle(t,e,s,n);return this.draw(a)}linearPath(t,e){const s=this.gen.linearPath(t,e);return this.draw(s)}polygon(t,e){const s=this.gen.polygon(t,e);return this.draw(s)}arc(t,e,s,n,a,i,o=!1,r){const h=this.gen.arc(t,e,s,n,a,i,o,r);return this.draw(h)}curve(t,e){const s=this.gen.curve(t,e);return this.draw(s)}path(t,e){const s=this.gen.path(t,e);return this.draw(s)}}const X={canvas:(t,e)=>new J(t,e),svg:(t,e)=>new U(t,e),generator:t=>new B(t),newSeed:()=>B.newSeed()}},607:function(t,e,s){var n=this&&this.__createBinding||(Object.create?function(t,e,s,n){void 0===n&&(n=s),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[s]}})}:function(t,e,s,n){void 0===n&&(n=s),t[n]=e[s]});e.__esModule=!0,e.RoughPolyline=e.RoughSvg=e.RoughEllipse=e.RoughPath=e.RoughLine=e.RoughArc=e.RoughCircle=e.RoughRect=void 0,n(e,s(678),"RoughRect");var a=s(122);n(e,a,"RoughCircle"),n(e,a,"RoughArc"),n(e,s(668),"RoughLine"),n(e,s(528),"RoughPath"),n(e,s(624),"RoughEllipse"),n(e,s(116),"RoughSvg"),n(e,s(536),"RoughPolyline")},122:(t,e,s)=>{e.__esModule=!0,e.RoughArc=e.RoughCircle=void 0;var n=s(25),a=s(757);e.RoughCircle=n.fabric.util.createClass(n.fabric.Circle,{type:"roughCircle",instance:null,roughOptions:null,initialize:function(t,e){this.roughOptions=e,this.callSuper("initialize",t)},_render:function(t){var e=a.default.canvas(t.canvas);this.instance?e.draw(this.instance):this.instance=e.circle(0,0,2*this.radius,this.roughOptions)}}),e.RoughArc=n.fabric.util.createClass(n.fabric.Circle,{type:"roughArc",instance:null,roughOptions:null,closed:null,initialize:function(t,e,s){this.roughOptions=e,this.closed=s,this.callSuper("initialize",t)},_render:function(t){var e=a.default.canvas(t.canvas);this.instance?e.draw(this.instance):this.instance=e.arc(0,0,this.width,this.height,this.startAngle,this.endAngle,this.closed,this.roughOptions)}})},624:(t,e,s)=>{e.__esModule=!0,e.RoughEllipse=void 0;var n=s(25),a=s(757);e.RoughEllipse=n.fabric.util.createClass(n.fabric.Ellipse,{type:"roughEllipse",instance:null,roughOptions:null,initialize:function(t,e){this.roughOptions=e,this.callSuper("initialize",t)},_render:function(t){var e=a.default.canvas(t.canvas);this.instance?e.draw(this.instance):this.instance=e.ellipse(0,0,2*this.rx,2*this.ry,this.roughOptions)}})},668:(t,e,s)=>{e.__esModule=!0,e.RoughLine=void 0;var n=s(25),a=s(757);e.RoughLine=n.fabric.util.createClass(n.fabric.Line,{type:"roughLine",instance:null,roughOptions:null,initialize:function(t,e,s){this.roughOptions=s,this.callSuper("initialize",t,e)},_render:function(t){var e=a.default.canvas(t.canvas);if(this.instance)e.draw(this.instance);else{var s=this.calcLinePoints();this.instance=e.line(s.x1,s.y1,s.x2,s.y2,this.roughOptions)}}})},528:(t,e,s)=>{e.__esModule=!0,e.RoughPath=void 0;var n=s(25),a=s(757);e.RoughPath=n.fabric.util.createClass(n.fabric.Path,{type:"roughPath",instance:null,roughOptions:null,initialize:function(t,e,s){this.roughOptions=s,this.callSuper("initialize",t,e)},_render:function(t){var e=a.default.canvas(t.canvas);if(this.instance)e.draw(this.instance);else{var s=-this.pathOffset.x,n=-this.pathOffset.y,i=this.path.map((function(t){return t.map((function(t,e){return Number.isFinite(t)?e%2?t+s:t+n:t}))})).join(" ");this.instance=e.path(i,this.roughOptions)}}})},410:(t,e,s)=>{e.__esModule=!0,e.RoughPolygon=void 0;var n=s(25),a=s(757);e.RoughPolygon=n.fabric.util.createClass(n.fabric.Polyline,{type:"roughPolygon",instance:null,roughOptions:null,initialize:function(t,e,s){this.roughOptions=s,this.callSuper("initialize",t,e)},_render:function(t){var e=a.default.canvas(t.canvas);if(this.instance)e.draw(this.instance);else{var s=-this.pathOffset.x,n=-this.pathOffset.y,i=this.points.map((function(t){var e=t.x,a=t.y;return[e+s,a+n]}));this.instance=e.polygon(i,this.roughOptions)}}})},536:(t,e,s)=>{e.__esModule=!0,e.RoughPolyline=void 0;var n=s(25),a=s(757);e.RoughPolyline=n.fabric.util.createClass(n.fabric.Polyline,{type:"roughPolyline",instance:null,roughOptions:null,initialize:function(t,e,s){this.roughOptions=s,this.callSuper("initialize",t,e)},_render:function(t){var e=a.default.canvas(t.canvas);if(this.instance)e.draw(this.instance);else{var s=-this.pathOffset.x,n=-this.pathOffset.y,i=this.points.map((function(t){var e=t.x,a=t.y;return[e+s,a+n]}));this.instance=e.linearPath(i,this.roughOptions)}}})},678:(t,e,s)=>{e.__esModule=!0,e.RoughRect=void 0;var n=s(25),a=s(757);e.RoughRect=n.fabric.util.createClass(n.fabric.Rect,{type:"roughRect",instance:null,roughOptions:null,initialize:function(t,e){this.roughOptions=e,this.callSuper("initialize",t)},_render:function(t){var e=a.default.canvas(t.canvas);this.instance?e.draw(this.instance):this.instance=e.rectangle(-this.width/2,-this.height/2,this.width,this.height,this.roughOptions)}})},116:function(t,e,s){var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,s=1,n=arguments.length;s<n;s++)for(var a in e=arguments[s])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},n.apply(this,arguments)};e.__esModule=!0,e.RoughSvg=void 0;var a=s(528),i=s(25),o=s(624),r=s(678),h=s(668),c=s(410),l=s(122);e.RoughSvg=function(t,e,s){void 0===s&&(s={});for(var u=e.height,p=e.width,f=new i.fabric.Group([],e),d=0,g=t;d<g.length;d++){var M=g[d],k=M.fill,y=M.stroke,b=M.strokeWidth,v=M.left,m=M.top,w=M.opacity,x=n(n({hachureGap:b/2},s),{fill:k,opacity:w,stroke:y||"none",strokeWidth:b}),P=-p/2+v,O=-u/2+m;switch(M.type){case"path":f.add(new a.RoughPath(M.path,n(n({},M),{left:P,top:O}),x));break;case"ellipse":f.add(new o.RoughEllipse(n(n({},M),{left:P,top:O}),x));break;case"rect":f.add(new r.RoughRect(n(n({},M),{left:P,top:O}),x));break;case"line":f.add(new h.RoughLine([M.x1,M.y1,M.x2,M.y2],n(n({},M),{left:P,top:O}),x));break;case"polyline":case"polygon":f.add(new c.RoughPolygon(M.points,n(n({},M),{left:P,top:O}),x));break;case"circle":f.add(new l.RoughCircle(n(n({},M),{left:P,top:O}),x))}}return f}},25:e=>{e.exports=t}},s={};function n(t){var a=s[t];if(void 0!==a)return a.exports;var i=s[t]={exports:{}};return e[t].call(i.exports,i,i.exports,n),i.exports}return n.d=(t,e)=>{for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(607)})()}));